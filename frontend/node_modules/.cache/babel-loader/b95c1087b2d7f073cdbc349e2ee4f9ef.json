{"remainingRequest":"/home/kien/Documents/blockchain-research/tezos-document/frontend/node_modules/babel-loader/lib/index.js!/home/kien/Documents/blockchain-research/tezos-document/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/kien/Documents/blockchain-research/tezos-document/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kien/Documents/blockchain-research/tezos-document/frontend/src/components/details/Transaction.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kien/Documents/blockchain-research/tezos-document/frontend/src/components/details/Transaction.vue","mtime":1602587663635},{"path":"/home/kien/Documents/blockchain-research/tezos-document/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kien/Documents/blockchain-research/tezos-document/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/kien/Documents/blockchain-research/tezos-document/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kien/Documents/blockchain-research/tezos-document/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2tpZW4vRG9jdW1lbnRzL2Jsb2NrY2hhaW4tcmVzZWFyY2gvdGV6b3MtZG9jdW1lbnQvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgSG9tZSBmcm9tICdAL2NvbXBvbmVudHMvcm9vdHMvSG9tZS52dWUnOwppbXBvcnQgU2VydmVyUmVxdWVzdCBmcm9tICdAL3JlcXVlc3RzL1NlcnZlclJlcXVlc3QnOwppbXBvcnQgU2lnbmF0dXJlTW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL21vZGFscy9TaWduYXR1cmVNb2RhbC52dWUnOwppbXBvcnQgQmxvY2tjaGFpblJlcXVlc3QgZnJvbSAnQC9yZXF1ZXN0cy9CbG9ja2NoYWluUmVxdWVzdCc7CmltcG9ydCBQREZSZXF1ZXN0IGZyb20gJ0AvcmVxdWVzdHMvUERGUmVxdWVzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBIb21lOiBIb21lLAogICAgU2lnbmF0dXJlTW9kYWw6IFNpZ25hdHVyZU1vZGFsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2VydGlmaWNhdGVzOiBbXSwKICAgICAgc2lnbk1vZGFsOiBmYWxzZSwKICAgICAgZW1haWw6IG51bGwsCiAgICAgIGluZGV4OiAwLAogICAgICBwcml2YXRlS2V5OiBudWxsLAogICAgICBzaWduRGlzYWJsZWQ6IFtdLAogICAgICBicm9hZGNhc3REaXNhYmxlZDogW10sCiAgICAgIGN1cnJlbnRDZXJ0aWZpY2F0ZTogbnVsbAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIFNlcnZlclJlcXVlc3QuZ2V0Q2VydGlmaWNhdGUoKS50aGVuKGZ1bmN0aW9uIChjZXJ0aWZpY2F0ZXMpIHsKICAgICAgY2VydGlmaWNhdGVzLmZvckVhY2goZnVuY3Rpb24gKGNlcnRpZmljYXRlKSB7CiAgICAgICAgaWYgKCFjZXJ0aWZpY2F0ZS5pc19icm9hZGNhc3RlZCkgewogICAgICAgICAgX3RoaXMuY2VydGlmaWNhdGVzLnB1c2goY2VydGlmaWNhdGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dTaWduYXR1cmU6IGZ1bmN0aW9uIHNob3dTaWduYXR1cmUoZW1haWwsIGluZGV4KSB7CiAgICAgIHRoaXMuc2lnbk1vZGFsID0gdHJ1ZTsKICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsOwogICAgICB0aGlzLmluZGV4ID0gaW5kZXg7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKGtleSwgY3VycmVudENlcnRpZmljYXRlKSB7CiAgICAgIHRoaXMucHJpdmF0ZUtleSA9IGtleTsKICAgICAgdGhpcy5zaWduTW9kYWwgPSBmYWxzZTsKICAgICAgdGhpcy5jdXJyZW50Q2VydGlmaWNhdGUgPSBjdXJyZW50Q2VydGlmaWNhdGU7CiAgICB9LAogICAgZGlzYWJsZTogZnVuY3Rpb24gZGlzYWJsZSgpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMuc2lnbkRpc2FibGVkLCB0aGlzLmluZGV4LCB0cnVlKTsKICAgIH0sCiAgICBicm9hZGNhc3Q6IGZ1bmN0aW9uIGJyb2FkY2FzdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBibG9ja2NoYWluSGFzaDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBCbG9ja2NoYWluUmVxdWVzdC5icm9hZGNhc3RDZXJ0aWZpY2F0ZSh7CiAgICAgICAgICAgICAgICAgIHByaXZhdGVLZXk6IF90aGlzMi5wcml2YXRlS2V5LAogICAgICAgICAgICAgICAgICBjZXJ0aWZpY2F0ZTogX3RoaXMyLmN1cnJlbnRDZXJ0aWZpY2F0ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGJsb2NrY2hhaW5IYXNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIFBERlJlcXVlc3QuY3JlYXRlQ2VydGlmaWNhdGVQREYoewogICAgICAgICAgICAgICAgICBkYXRhOiBfdGhpczIuY3VycmVudENlcnRpZmljYXRlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gU2VydmVyUmVxdWVzdC5zZW5kQ2VydGlmaWNhdGVCeU1haWwoewogICAgICAgICAgICAgICAgICBuYW1lOiBfdGhpczIuY3VycmVudENlcnRpZmljYXRlLm5hbWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiAiZG9uZ2t5Njc3NkBnbWFpbC5jb20iCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gU2VydmVyUmVxdWVzdC5zdG9yZUhhc2goewogICAgICAgICAgICAgICAgICBlbWFpbDogX3RoaXMyLmVtYWlsLAogICAgICAgICAgICAgICAgICBibG9ja2NoYWluX2hhc2g6IGJsb2NrY2hhaW5IYXNoWzBdLnJlY2VpdmVyCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX3RoaXMyLiRzZXQoX3RoaXMyLmJyb2FkY2FzdERpc2FibGVkLCBfdGhpczIuaW5kZXgsIHRydWUpOwoKICAgICAgICAgICAgICAgIHdpbmRvdy5FdmVudEJ1cy4kZW1pdCgnU1VDQ0VTUycsICdTdWNjZXNzJyk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb3V0ZWQ6IGZ1bmN0aW9uIG1vdXRlZCgpIHsKICAgIHRoaXMuYnJvYWRjYXN0RGlzYWJsZWRbMF0gPSB0cnVlOwogIH0KfTs="},{"version":3,"sources":["Transaction.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,OAAA,IAAA,MAAA,6BAAA;AACA,OAAA,aAAA,MAAA,0BAAA;AACA,OAAA,cAAA,MAAA,wCAAA;AACA,OAAA,iBAAA,MAAA,8BAAA;AACA,OAAA,UAAA,MAAA,uBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,cAAA,EAAA;AAFA,GADA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA,KAFA;AAGA,MAAA,KAAA,EAAA,IAHA;AAIA,MAAA,KAAA,EAAA,CAJA;AAKA,MAAA,UAAA,EAAA,IALA;AAMA,MAAA,YAAA,EAAA,EANA;AAOA,MAAA,iBAAA,EAAA,EAPA;AAQA,MAAA,kBAAA,EAAA;AARA,KAAA;AAUA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AAAA;;AACA,IAAA,aAAA,CAAA,cAAA,GAAA,IAAA,CAAA,UAAA,YAAA,EAAA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,UAAA,WAAA,EAAA;AACA,YAAA,CAAA,WAAA,CAAA,cAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,CAAA,IAAA,CAAA,WAAA;AACA;AACA,OAJA;AAKA,KANA;AAOA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,KADA,EACA,KADA,EACA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,KALA;AAMA,IAAA,KANA,iBAMA,GANA,EAMA,kBANA,EAMA;AACA,WAAA,UAAA,GAAA,GAAA;AACA,WAAA,SAAA,GAAA,KAAA;AACA,WAAA,kBAAA,GAAA,kBAAA;AACA,KAVA;AAWA,IAAA,OAXA,qBAWA;AACA,WAAA,IAAA,CAAA,KAAA,YAAA,EAAA,KAAA,KAAA,EAAA,IAAA;AACA,KAbA;AAcA,IAAA,SAdA,uBAcA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,iBAAA,CAAA,oBAAA,CAAA;AAAA,kBAAA,UAAA,EAAA,MAAA,CAAA,UAAA;AAAA,kBAAA,WAAA,EAAA,MAAA,CAAA;AAAA,iBAAA,CADA;;AAAA;AACA,gBAAA,cADA;AAAA;AAAA,uBAEA,UAAA,CAAA,oBAAA,CAAA;AAAA,kBAAA,IAAA,EAAA,MAAA,CAAA;AAAA,iBAAA,CAFA;;AAAA;AAAA;AAAA,uBAGA,aAAA,CAAA,qBAAA,CAAA;AAAA,kBAAA,IAAA,EAAA,MAAA,CAAA,kBAAA,CAAA,IAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,iBAAA,CAHA;;AAAA;AAAA;AAAA,uBAIA,aAAA,CAAA,SAAA,CAAA;AAAA,kBAAA,KAAA,EAAA,MAAA,CAAA,KAAA;AAAA,kBAAA,eAAA,EAAA,cAAA,CAAA,CAAA,CAAA,CAAA;AAAA,iBAAA,CAJA;;AAAA;AAKA,gBAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CAAA,iBAAA,EAAA,MAAA,CAAA,KAAA,EAAA,IAAA;;AACA,gBAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,SAAA,EAAA,SAAA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AArBA,GA1BA;AAiDA,EAAA,MAjDA,oBAiDA;AACA,SAAA,iBAAA,CAAA,CAAA,IAAA,IAAA;AACA;AAnDA,CAAA","sourcesContent":["<template>\n  <div>\n    <home :activeTransaction=\"true\"/>\n    <div class=\"datatable\">\n      <table>\n        <tr>\n          <th>{{ \"Name\" }}</th>\n          <th>{{ \"Student ID\" }}</th>\n          <th>{{ \"Email\" }}</th>\n          <th>{{ \"Diploma Type\" }}</th>\n          <th>{{ \"Credential Number\" }}</th>\n          <th class=\"action\">{{ \"Action\" }}</th>\n        </tr>\n        <tr v-for=\"(certificate, index) in certificates\" :key=\"index\">\n          <td>{{ certificate.name }}</td>\n          <td>{{ certificate.identity }}</td>\n          <td>{{ certificate.email }}</td>\n          <td>{{ certificate.diploma_type }}</td>\n          <td>{{ certificate.credential_number }}</td>\n          <td class=\"action\">\n            <button \n            @click=\"showSignature(certificate.email, index)\" \n            :disabled=\"signDisabled[index]\"\n            :class=\"{ disable: signDisabled[index] }\">{{ \"Sign\" }}</button>\n            <button class=\"right-button\" \n            @click=\"broadcast()\"\n            :disabled=\"broadcastDisabled[index]\"\n            :class=\"{ disable: broadcastDisabled[index] }\">{{ \"Broadcast\" }}</button>\n          </td>\n        </tr>\n      </table>\n    </div>\n    <signature-modal v-if=\"signModal\" :email=\"email\" @close-modal=\"close\" @disable=\"disable\"/>\n  </div>\n</template>\n\n<script>\nimport Home from '@/components/roots/Home.vue'\nimport ServerRequest from '@/requests/ServerRequest'\nimport SignatureModal from '@/components/modals/SignatureModal.vue'\nimport BlockchainRequest from '@/requests/BlockchainRequest'\nimport PDFRequest from '@/requests/PDFRequest' \n\nexport default {\n  components: {\n    Home,\n    SignatureModal\n  },\n  data() {\n    return {\n      certificates: [],\n      signModal: false,\n      email: null,\n      index: 0,\n      privateKey: null,\n      signDisabled: [],\n      broadcastDisabled: [],\n      currentCertificate: null\n    }\n  },\n  created () {\n    ServerRequest.getCertificate().then(certificates => {\n      certificates.forEach(certificate => {\n        if(!certificate.is_broadcasted) {\n          this.certificates.push(certificate)\n        }\n      })\n    })\n  },\n  methods: {\n    showSignature(email, index) {\n      this.signModal = true\n      this.email = email\n      this.index = index\n    },\n    close(key, currentCertificate) {\n      this.privateKey = key\n      this.signModal = false\n      this.currentCertificate = currentCertificate\n    },\n    disable() {\n      this.$set(this.signDisabled, this.index, true)\n    },\n    async broadcast() {\n      const blockchainHash = await BlockchainRequest.broadcastCertificate({ privateKey: this.privateKey, certificate: this.currentCertificate })\n      await PDFRequest.createCertificatePDF({ data: this.currentCertificate })\n      await ServerRequest.sendCertificateByMail({ name: this.currentCertificate.name, email: \"dongky6776@gmail.com\" })\n      await ServerRequest.storeHash({ email: this.email, blockchain_hash: blockchainHash[0].receiver })\n      this.$set(this.broadcastDisabled, this.index, true)\n      window.EventBus.$emit('SUCCESS', 'Success')\n    }\n  },\n  mouted() {\n    this.broadcastDisabled[0] = true;\n  },\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.datatable {\n  margin-top: 95px;\n}\ntable {\n  font-family: Arial, Helvetica, sans-serif;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);\n}\n\nth {\n  text-align: center;\n  color: #D5DDE5;\n  background: #333333;\n  font-size: 15px;\n  font-weight: 600;\n  padding: 20px;\n}\ntd {\n  vertical-align: middle;\n  font-size: 13px;\n  text-shadow: -1px -1px 1px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n}\n.action {\n  padding-right: 30px;\n}\nbutton {\n  background: #000000;\n  width: 100px;\n  border: 0;\n  padding: 13px;\n  color: #FFFFFF;\n  font-size: 13px;\n  border-radius: 3px;\n  height: 40px;\n  position: relative;\n  cursor: pointer;\n}\nbutton.disable {\n  background: #625D5D;\n}\n.right-button {\n  margin-left: 5px;\n}\n.right-button.disable {\n  background: #625D5D;\n}\n</style>\n"],"sourceRoot":"src/components/details"}]}